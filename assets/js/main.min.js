document.addEventListener("DOMContentLoaded",async function(){setTimeout(function(){document.body.classList.add("Loaded")},0);let e=0,t=performance.now(),r=document.getElementById("ScrollCanvas"),n=r.getContext("2d"),l=[],i=o=>{o-t>=33.333333333333336&&(e=(e+1)%60,n.clearRect(0,0,r.width,r.height),n.drawImage(l[e],0,0,r.width,r.height),t=o),requestAnimationFrame(i)};(()=>{let e=0;for(let t=1;t<=60;t++){let r=t.toString().padStart(2,"0"),n=new Image;n.onload=()=>{60==++e&&requestAnimationFrame(i)},n.src=`assets/img/hero/ScrollDown/ScrollDown-${r}.svg`,l.push(n)}})();let o=new URLSearchParams(window.location.search),s=o.get("lang")||"en",a={};try{let c=await fetch("assets/json/translations.json");if(!c.ok)throw Error(`HTTP error! Status: ${c.status}`);a=await c.json(),document.querySelectorAll("*").forEach(e=>{if(1===e.childNodes.length&&3===e.childNodes[0].nodeType){let t=e.textContent;t.includes("{{")&&(e.textContent=t.replace(/{{(.*?)}}/g,(e,t)=>a[t=t.trim()]&&a[t][s]?a[t][s]:`{{${t}}}`))}})}catch(u){console.error("❌ Error fetching translations:",u)}let d=document.documentElement;"fa"===s?(d.setAttribute("lang","fa"),d.setAttribute("dir","rtl")):(d.setAttribute("lang","en"),d.setAttribute("dir","ltr")),document.querySelectorAll(".LanguageSwitcher a").forEach(e=>{let t=new URL(e.href).searchParams.get("lang");t===s?(e.classList.add("Current"),e.setAttribute("aria-current","true")):(e.classList.remove("Current"),e.setAttribute("aria-current","false"))});let h=document.querySelectorAll(".LightSwitch input");function f(e){let t=document.documentElement.getAttribute("lights");if(e!==t){if("auto"===e){let r=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.setAttribute("lights",r?"off":"on")}else document.documentElement.setAttribute("lights",e);localStorage.setItem("lights",e)}}f(localStorage.getItem("lights")||"auto"),h.forEach(e=>{e.addEventListener("change",function(){this.checked&&f(this.value)})}),setTimeout(function e(){let t=document.querySelectorAll("spline-viewer");0!==t.length&&t.forEach(e=>{let t=0;!function r(){if(!(t>=10)){if(e.shadowRoot){let n=e.shadowRoot.querySelector("#logo");n?n.remove():(t++,setTimeout(r,500))}else t++,setTimeout(r,500)}}()})},500),!function e(){let t=document.querySelector(".CopyRight span");if(t){let r=new Date().getFullYear();t.textContent=r}}();let g=!1;function $(){g||(requestAnimationFrame(()=>{let e=document.querySelector("#Hero");if(!e)return;let t=e.offsetHeight,r=window.scrollY,n=Math.floor(100*Math.min(r/t,1)),l=Math.max((n-0)/100,0);e.style.transform=`scale(${1-.001*n}) translateY(${.75*n}px) rotateX(${.1*n}deg)`,e.style.opacity=1-l,e.style.filter=`blur(${20*l}px)`,g=!1}),g=!0)}window.addEventListener("scroll",$),$();let y=document.querySelector("#Hero .Status"),p=new Date,m=new Date(p);m.setDate(p.getDate()+15);let v=m.toLocaleString("default",{month:"long"}),S=m.getFullYear();m.getDate()>15&&(m.setMonth(m.getMonth()+1),m.setDate(1),v=m.toLocaleString("default",{month:"long"}),S=m.getFullYear()),y.querySelector("strong").textContent=`${v} ${S}`;let E=document.querySelector("#Hero .Developer .Magic"),L=document.querySelector("#Hero .Developer .After"),_=document.querySelector("#Hero .Developer .WebDev"),w=!1;E.addEventListener("mousedown",()=>{w=!0,document.body.style.userSelect="none"}),window.addEventListener("mouseup",()=>{w=!1,document.body.style.userSelect=""}),window.addEventListener("mousemove",e=>{if(!w)return;let t=_.getBoundingClientRect(),r=e.clientX-t.left,n=t.width;r<-4&&(r=-4),r>n-8&&(r=n-8);let l=10-r/10;E.style.left=`${r}px`,E.style.top=`${l}px`,L.style.width=`${r}px`});let x=document.querySelectorAll("#Hero .Designer .ColorSets li"),q=document.querySelector("#Hero .Designer h2");async function C(){let e=await new Promise((e,t)=>{if(window.Matter)return e(window.Matter);let r=document.createElement("script");r.src="../assets/js/matter.min.js",r.onload=()=>e(window.Matter),r.onerror=t,document.head.appendChild(r)}),{Engine:t,Render:r,Runner:n,Bodies:l,World:i,Mouse:o,MouseConstraint:s}=e,a=document.querySelector("#Services .DEV .Wrapper");if(!a)return;a.style.position="relative";let c=t.create(),u=c.world,d=r.create({element:a,engine:c,options:{width:a.clientWidth,height:a.clientHeight,wireframes:!1,background:"transparent",pixelRatio:window.devicePixelRatio,enabled:!1}});r.run(d);let h=n.create();n.run(h,c),d.canvas.addEventListener("wheel",e=>{e.stopPropagation()},{passive:!0});let f,g,$,y;function p(){let e=a.clientWidth,t=a.clientHeight;f&&i.remove(u,[f,g,$,y]),f=l.rectangle(e/2,t-5,e,10,{isStatic:!0,render:{visible:!1}}),g=l.rectangle(5,t/2,10,t,{isStatic:!0,render:{visible:!1}}),$=l.rectangle(e-5,t/2,10,t,{isStatic:!0,render:{visible:!1}}),y=l.rectangle(e/2,5,e,10,{isStatic:!0,render:{visible:!1}}),i.add(u,[f,g,$,y])}setTimeout(p,50);let m=a.querySelectorAll(".Pill"),v=[];function S(){let t=a.clientWidth,r=a.clientHeight;d.bounds.max.x=t,d.bounds.max.y=r,d.options.width=t,d.options.height=r,d.canvas.width=t,d.canvas.height=r,e.Render.setPixelRatio(d,window.devicePixelRatio),p(),function t(){let r=a.clientWidth,n=a.clientHeight;v.forEach(({body:t})=>{e.Body.setPosition(t,{x:Math.min(Math.max(t.position.x,20),r-20),y:Math.min(Math.max(t.position.y,20),n-20)})})}()}m.forEach(e=>{let t=e.getBoundingClientRect(),r=a.getBoundingClientRect(),n=t.width,o=t.height,s=l.rectangle(t.left-r.left+t.width/2,t.top-r.top+t.height/2,t.width,t.height,{restitution:.32,friction:.1,density:.02,frictionAir:.02,chamfer:{radius:Math.min(t.width,t.height)/2},render:{visible:!1}});i.add(u,s),v.push({element:e,body:s,initialWidth:n,initialHeight:o})});let E;window.addEventListener("resize",()=>{clearTimeout(E),E=setTimeout(S,200)});let L=o.create(d.canvas),_=s.create(c,{mouse:L,constraint:{stiffness:.2,render:{visible:!1}}});i.add(u,_),d.mouse=L,a.addEventListener("mouseleave",()=>{_.body&&(_.body=null),_.constraint.pointA=null,_.constraint.bodyB=null,_.constraint.pointB=null}),c.enableSleeping=!0;let w=0;!function e(){++w%2==0&&v.forEach(({element:e,body:t,initialWidth:r,initialHeight:n})=>{e.style.position="absolute",e.style.left=`${t.position.x-r/2}px`,e.style.top=`${t.position.y-n/2}px`,e.style.transform=`rotate(${t.angle}rad)`}),requestAnimationFrame(e)}(),L.element.removeEventListener("wheel",L.mousewheel)}x.forEach(e=>{e.addEventListener("click",function(){let e=this.classList.contains("Selected");if(e){this.classList.remove("Selected"),q.classList.forEach(e=>{e.startsWith("Color")&&q.classList.remove(e)});return}q.style.opacity="0.5",setTimeout(()=>{q.classList.forEach(e=>{e.startsWith("Color")&&q.classList.remove(e)}),q.classList.add(...this.classList),q.style.opacity="1"},500),x.forEach(e=>e.classList.remove("Selected")),this.classList.add("Selected")})}),!function e(){let t=document.querySelector("#Services .DEV .Wrapper");if(!t)return;let r=!1;function n(){if(r)return;let e=t.getBoundingClientRect(),l=e.top+e.height/2,i=window.innerHeight/2,o=.5*window.innerHeight;Math.abs(l-i)<o&&(C(),r=!0,window.removeEventListener("scroll",n))}let l=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&!r&&(window.addEventListener("scroll",n),n())})},{threshold:.5});l.observe(t)}();let b=document.querySelector(".Music audio"),A=0,M=b.querySelectorAll("source"),H=Array.from(M).map(e=>e.src);function P(){let e=b.querySelectorAll("source");e.forEach((e,t)=>{e.src=t===A?H[t]:""}),b.load()}async function B(){try{await import("../js/jsmediatags.min.js");let e=window.jsmediatags,t=H[A];e.read(t,{onSuccess:function(e){let t=e.tags.picture,r=e.tags.title,n=e.tags.artist;if(t){let l=new Uint8Array(t.data),i="";l.forEach(e=>{i+=String.fromCharCode(e)});let o=window.btoa(i),s="data:"+t.format+";base64,"+o;document.querySelectorAll(".Music .ArtWork img").forEach(e=>{e.src=s})}let a=document.querySelector(".Music strong");a&&(a.textContent=r||"Unknown Title");let c=document.querySelector(".Music p");c&&(c.textContent=n||"Unknown Artist"),function e(){let t=Math.floor(b.duration),r=isNaN(t)?0:t,n=r%60;k.textContent=0===r?"0:00":`-${Math.floor(r/60)}:${n<10?"0"+n:n}`}()},onError:function(e){console.error("⚠️ Error reading Music MetaData:",e)}})}catch(r){console.error("❌ Failed to load jsMediaTags:",r)}}let D=document.querySelector(".Benex.Music .Wrapper .ProgressBar"),R=document.querySelector(".Benex.Music .Wrapper .Current"),k=document.querySelector(".Benex.Music .Wrapper .Duration");b.addEventListener("timeupdate",function(){let e=isNaN(b.currentTime/b.duration*100)?0:b.currentTime/b.duration*100;D.value=e,D.style.setProperty("--value",D.value),D.style.setProperty("--min",D.min||"0"),D.style.setProperty("--max",D.max||"100");let t=Math.floor(b.currentTime),r=Math.floor(b.duration),n=t%60,l=Math.floor(r-t),i=l%60;R.textContent=`${Math.floor(t/60)}:${n<10?"0"+n:n}`,k.textContent=0===l?"0:00":`-${Math.floor(l/60)}:${i<10?"0"+i:i}`}),D.addEventListener("input",function(){let e=D.value/100*b.duration;b.currentTime=e,D.style.setProperty("--value",D.value)});let W=document.querySelector(".Music .Controls .Play"),j=document.querySelector(".Music .Controls .Pause");function I(){b.paused?(W.classList.remove("Hide"),j.classList.add("Hide")):(j.classList.remove("Hide"),W.classList.add("Hide"))}I(),W.addEventListener("click",function(){b.play(),I()}),j.addEventListener("click",function(){b.pause(),I()});let N=document.querySelector(".Music .Controls .Prev"),T=document.querySelector(".Music .Controls .Next");N.addEventListener("click",function(){let e=!b.paused;A=(A-1+H.length)%H.length,P(),B(),e&&b.play(),I()}),T.addEventListener("click",function(){let e=!b.paused;A=(A+1)%H.length,P(),B(),e&&b.play(),I()}),b.addEventListener("ended",function(){A=(A+1)%H.length,P(),B(),b.play(),I()}),P(),B();let Y=document.querySelector(".PhotoSlider"),F=Y.querySelectorAll(".Photo"),z=document.querySelectorAll(".Nav .Item"),U=document.querySelector(".Nav .Indicator"),V=0,X=(e,t)=>{F.forEach(e=>{e.classList.remove("visible"),"video"===e.tagName.toLowerCase()&&e.pause()});let r=F[t[e]];r.classList.add("visible"),"video"===r.tagName.toLowerCase()&&r.play()};z.forEach((e,t)=>{e.addEventListener("click",function(){z.forEach(e=>e.classList.remove("Active")),e.classList.add("Active");let t=e.classList[1];O(t);let r=e.getBoundingClientRect(),n=e.parentElement.getBoundingClientRect(),l=r.left-n.left;function i(){let t=e.getBoundingClientRect(),r=e.parentElement.getBoundingClientRect(),n=t.left-r.left;U.style.width=`${e.clientWidth}px`,U.style.height=`${e.clientHeight}px`,U.style.left=`${n}px`}U.style.width=`${e.clientWidth}px`,U.style.height=`${e.clientHeight}px`,U.style.left=`${l}px`,i(),window.addEventListener("resize",i)})});let O=e=>{let t=[];F.forEach((r,n)=>{r.classList.contains(e)&&t.push(n)}),t.length>0&&X(V=0,t)};F.forEach(e=>{e.addEventListener("click",function(){let e=document.querySelector(".Nav .Item.Active")?.classList[1],t=[];F.forEach((r,n)=>{r.classList.contains(e)&&t.push(n)}),X(V=(V+1)%t.length,t)})}),z.length>0&&z[0].click();let G,J=()=>{G=setInterval(()=>{let e=document.querySelector(".Nav .Item.Active")?.classList[1],t=[];F.forEach((r,n)=>{r.classList.contains(e)&&t.push(n)}),X(V=(V+1)%t.length,t)},3200)},K=()=>{clearInterval(G)};J();let Q=document.querySelector(".Benex.Photos");Q.addEventListener("mouseenter",function(){K()}),Q.addEventListener("mouseleave",function(){J()})});