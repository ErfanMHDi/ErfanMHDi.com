document.addEventListener("DOMContentLoaded",async function(){let e=performance.now();window.addEventListener("load",()=>{let t=performance.now();setTimeout(()=>{document.body.classList.add("Loaded")},Math.max(250-(t-e),0))});let t=0,r=performance.now(),n=document.getElementById("ScrollCanvas"),l=n.getContext("2d"),i=[],o=e=>{e-r>=33.333333333333336&&(t=(t+1)%60,l.clearRect(0,0,n.width,n.height),l.drawImage(i[t],0,0,n.width,n.height),r=e),requestAnimationFrame(o)};(()=>{let e=0;for(let t=1;t<=60;t++){let r=t.toString().padStart(2,"0"),n=new Image;n.onload=()=>{60==++e&&requestAnimationFrame(o)},n.src=`assets/img/hero/ScrollDown/ScrollDown-${r}.svg`,i.push(n)}})();let s=new URLSearchParams(window.location.search),a=s.get("lang")||"en",c={};try{let d=await fetch("assets/json/translations.json");if(!d.ok)throw Error(`HTTP error! Status: ${d.status}`);c=await d.json(),document.querySelectorAll("*").forEach(e=>{if(1===e.childNodes.length&&3===e.childNodes[0].nodeType){let t=e.textContent;t.includes("{{")&&(e.textContent=t.replace(/{{(.*?)}}/g,(e,t)=>c[t=t.trim()]&&c[t][a]?c[t][a]:`{{${t}}}`))}})}catch(u){console.error("❌ Error fetching translations:",u)}let h=document.documentElement;"fa"===a?(h.setAttribute("lang","fa"),h.setAttribute("dir","rtl")):(h.setAttribute("lang","en"),h.setAttribute("dir","ltr")),document.querySelectorAll(".LanguageSwitcher a").forEach(e=>{let t=new URL(e.href).searchParams.get("lang");t===a?(e.classList.add("Current"),e.setAttribute("aria-current","true")):(e.classList.remove("Current"),e.setAttribute("aria-current","false"))});let f=document.querySelectorAll(".LightSwitch input");function g(e){if("auto"===e){let t=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.setAttribute("lights",t?"off":"on")}else document.documentElement.setAttribute("lights",e)}function $(e){let t=document.documentElement.getAttribute("lights");"auto"===e?g("auto"):e!==t&&g(e),localStorage.setItem("lights",e)}window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{let t=localStorage.getItem("lights");"auto"===t&&g("auto")}),$(localStorage.getItem("lights")||"auto"),f.forEach(e=>{e.addEventListener("change",function(){this.checked&&$(this.value)})}),setTimeout(function e(){let t=document.querySelectorAll("spline-viewer");0!==t.length&&t.forEach(e=>{let t=0;!function r(){if(!(t>=10)){if(e.shadowRoot){let n=e.shadowRoot.querySelector("#logo");n?n.remove():(t++,setTimeout(r,500))}else t++,setTimeout(r,500)}}()})},500),!function e(){let t=document.querySelector(".CopyRight span");if(t){let r=new Date().getFullYear();t.textContent=r}}();let y=!1;function m(){y||(requestAnimationFrame(()=>{let e=document.querySelector("#Hero");if(!e)return;let t=e.offsetHeight,r=window.scrollY,n=Math.floor(100*Math.min(r/t,1)),l=Math.max((n-0)/100,0);e.style.transform=`scale(${1-.001*n}) translateY(${.75*n}px) rotateX(${.1*n}deg)`,e.style.opacity=1-l,e.style.filter=`blur(${20*l}px)`,y=!1}),y=!0)}window.addEventListener("scroll",m),m();let p=document.querySelector("#Hero .Status"),v=new Date,S=new Date(v);S.setDate(v.getDate()+15);let E=S.toLocaleString("default",{month:"long"}),L=S.getFullYear();S.getDate()>15&&(S.setMonth(S.getMonth()+1),S.setDate(1),E=S.toLocaleString("default",{month:"long"}),L=S.getFullYear()),p.querySelector("strong").textContent=`${E} ${L}`;let _=document.querySelector("#Hero .Developer .Magic"),w=document.querySelector("#Hero .Developer .After"),x=document.querySelector("#Hero .Developer .WebDev"),q=!1;_.addEventListener("mousedown",()=>{q=!0,document.body.style.userSelect="none"}),window.addEventListener("mouseup",()=>{q=!1,document.body.style.userSelect=""}),window.addEventListener("mousemove",e=>{if(!q)return;let t=x.getBoundingClientRect(),r=e.clientX-t.left,n=t.width;r<-4&&(r=-4),r>n-8&&(r=n-8);let l=10-r/10;_.style.left=`${r}px`,_.style.top=`${l}px`,w.style.width=`${r}px`});let C=document.querySelectorAll("#Hero .Designer .ColorSets li"),b=document.querySelector("#Hero .Designer h2");async function A(){let e=await new Promise((e,t)=>{if(window.Matter)return e(window.Matter);let r=document.createElement("script");r.src="../assets/js/matter.min.js",r.onload=()=>e(window.Matter),r.onerror=t,document.head.appendChild(r)}),{Engine:t,Render:r,Runner:n,Bodies:l,World:i,Mouse:o,MouseConstraint:s}=e,a=document.querySelector("#Services .DEV .Wrapper");if(!a)return;a.style.position="relative";let c=t.create(),d=c.world,u=r.create({element:a,engine:c,options:{width:a.clientWidth,height:a.clientHeight,wireframes:!1,background:"transparent",pixelRatio:window.devicePixelRatio,enabled:!1}});r.run(u);let h=n.create();n.run(h,c),u.canvas.addEventListener("wheel",e=>{e.stopPropagation()},{passive:!0});let f,g,$,y;function m(){let e=a.clientWidth,t=a.clientHeight;f&&i.remove(d,[f,g,$,y]),f=l.rectangle(e/2,t-5,e,10,{isStatic:!0,render:{visible:!1}}),g=l.rectangle(5,t/2,10,t,{isStatic:!0,render:{visible:!1}}),$=l.rectangle(e-5,t/2,10,t,{isStatic:!0,render:{visible:!1}}),y=l.rectangle(e/2,5,e,10,{isStatic:!0,render:{visible:!1}}),i.add(d,[f,g,$,y])}setTimeout(m,50);let p=a.querySelectorAll(".Pill"),v=[];function S(){let t=a.clientWidth,r=a.clientHeight;u.bounds.max.x=t,u.bounds.max.y=r,u.options.width=t,u.options.height=r,u.canvas.width=t,u.canvas.height=r,e.Render.setPixelRatio(u,window.devicePixelRatio),m(),function t(){let r=a.clientWidth,n=a.clientHeight;v.forEach(({body:t})=>{e.Body.setPosition(t,{x:Math.min(Math.max(t.position.x,20),r-20),y:Math.min(Math.max(t.position.y,20),n-20)})})}()}p.forEach(e=>{let t=e.getBoundingClientRect(),r=a.getBoundingClientRect(),n=t.width,o=t.height,s=l.rectangle(t.left-r.left+t.width/2,t.top-r.top+t.height/2,t.width,t.height,{restitution:.32,friction:.1,density:.02,frictionAir:.02,chamfer:{radius:Math.min(t.width,t.height)/2},render:{visible:!1}});i.add(d,s),v.push({element:e,body:s,initialWidth:n,initialHeight:o})});let E;window.addEventListener("resize",()=>{clearTimeout(E),E=setTimeout(S,200)});let L=o.create(u.canvas),_=s.create(c,{mouse:L,constraint:{stiffness:.2,render:{visible:!1}}});i.add(d,_),u.mouse=L,a.addEventListener("mouseleave",()=>{_.body&&(_.body=null),_.constraint.pointA=null,_.constraint.bodyB=null,_.constraint.pointB=null}),c.enableSleeping=!0;let w=0;!function e(){++w%2==0&&v.forEach(({element:e,body:t,initialWidth:r,initialHeight:n})=>{e.style.position="absolute",e.style.left=`${t.position.x-r/2}px`,e.style.top=`${t.position.y-n/2}px`,e.style.transform=`rotate(${t.angle}rad)`}),requestAnimationFrame(e)}(),L.element.removeEventListener("wheel",L.mousewheel)}C.forEach(e=>{e.addEventListener("click",function(){let e=this.classList.contains("Selected");if(e){this.classList.remove("Selected"),b.classList.forEach(e=>{e.startsWith("Color")&&b.classList.remove(e)});return}b.style.opacity="0.5",setTimeout(()=>{b.classList.forEach(e=>{e.startsWith("Color")&&b.classList.remove(e)}),b.classList.add(...this.classList),b.style.opacity="1"},500),C.forEach(e=>e.classList.remove("Selected")),this.classList.add("Selected")})}),!function e(){let t=document.querySelector("#Services .DEV .Wrapper");if(!t)return;let r=!1;function n(){if(r)return;let e=t.getBoundingClientRect(),l=e.top+e.height/2,i=window.innerHeight/2,o=.5*window.innerHeight;Math.abs(l-i)<o&&(A(),r=!0,window.removeEventListener("scroll",n))}let l=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&!r&&(window.addEventListener("scroll",n),n())})},{threshold:.5});l.observe(t)}();let M=document.querySelector(".Music audio"),H=0,P=M.querySelectorAll("source"),B=Array.from(P).map(e=>e.src);function D(){let e=M.querySelectorAll("source");e.forEach((e,t)=>{e.src=t===H?B[t]:""}),M.load()}async function R(){try{await import("../js/jsmediatags.min.js");let e=window.jsmediatags,t=B[H];e.read(t,{onSuccess:function(e){let t=e.tags.picture,r=e.tags.title,n=e.tags.artist;if(t){let l=new Uint8Array(t.data),i="";l.forEach(e=>{i+=String.fromCharCode(e)});let o=window.btoa(i),s="data:"+t.format+";base64,"+o;document.querySelectorAll(".Music .ArtWork img").forEach(e=>{e.src=s})}let a=document.querySelector(".Music strong");a&&(a.textContent=r||"Unknown Title");let c=document.querySelector(".Music p");c&&(c.textContent=n||"Unknown Artist"),function e(){let t=Math.floor(M.duration),r=isNaN(t)?0:t,n=r%60;j.textContent=0===r?"0:00":`-${Math.floor(r/60)}:${n<10?"0"+n:n}`}()},onError:function(e){console.error("⚠️ Error reading Music MetaData:",e)}})}catch(r){console.error("❌ Failed to load jsMediaTags:",r)}}let k=document.querySelector(".Benex.Music .Wrapper .ProgressBar"),W=document.querySelector(".Benex.Music .Wrapper .Current"),j=document.querySelector(".Benex.Music .Wrapper .Duration");M.addEventListener("timeupdate",function(){let e=isNaN(M.currentTime/M.duration*100)?0:M.currentTime/M.duration*100;k.value=e,k.style.setProperty("--value",k.value),k.style.setProperty("--min",k.min||"0"),k.style.setProperty("--max",k.max||"100");let t=Math.floor(M.currentTime),r=Math.floor(M.duration),n=t%60,l=Math.floor(r-t),i=l%60;W.textContent=`${Math.floor(t/60)}:${n<10?"0"+n:n}`,j.textContent=0===l?"0:00":`-${Math.floor(l/60)}:${i<10?"0"+i:i}`}),k.addEventListener("input",function(){let e=k.value/100*M.duration;M.currentTime=e,k.style.setProperty("--value",k.value)});let I=document.querySelector(".Music .Controls .Play"),N=document.querySelector(".Music .Controls .Pause");function T(){M.paused?(I.classList.remove("Hide"),N.classList.add("Hide")):(N.classList.remove("Hide"),I.classList.add("Hide"))}T(),I.addEventListener("click",function(){M.play(),T()}),N.addEventListener("click",function(){M.pause(),T()});let Y=document.querySelector(".Music .Controls .Prev"),F=document.querySelector(".Music .Controls .Next");Y.addEventListener("click",function(){let e=!M.paused;H=(H-1+B.length)%B.length,D(),R(),e&&M.play(),T()}),F.addEventListener("click",function(){let e=!M.paused;H=(H+1)%B.length,D(),R(),e&&M.play(),T()}),M.addEventListener("ended",function(){H=(H+1)%B.length,D(),R(),M.play(),T()}),D(),R();let z=document.querySelector(".PhotoSlider"),U=z.querySelectorAll(".Photo"),V=document.querySelectorAll(".Nav .Item"),X=document.querySelector(".Nav .Indicator"),O=0,G=(e,t)=>{U.forEach(e=>{e.classList.remove("visible"),"video"===e.tagName.toLowerCase()&&e.pause()});let r=U[t[e]];r.classList.add("visible"),"video"===r.tagName.toLowerCase()&&r.play()};V.forEach((e,t)=>{e.addEventListener("click",function(){V.forEach(e=>e.classList.remove("Active")),e.classList.add("Active");let t=e.classList[1];J(t);let r=e.getBoundingClientRect(),n=e.parentElement.getBoundingClientRect(),l=r.left-n.left;function i(){let t=e.getBoundingClientRect(),r=e.parentElement.getBoundingClientRect(),n=t.left-r.left;X.style.width=`${e.clientWidth}px`,X.style.height=`${e.clientHeight}px`,X.style.left=`${n}px`}X.style.width=`${e.clientWidth}px`,X.style.height=`${e.clientHeight}px`,X.style.left=`${l}px`,i(),window.addEventListener("resize",i)})});let J=e=>{let t=[];U.forEach((r,n)=>{r.classList.contains(e)&&t.push(n)}),t.length>0&&G(O=0,t)};U.forEach(e=>{e.addEventListener("click",function(){let e=document.querySelector(".Nav .Item.Active")?.classList[1],t=[];U.forEach((r,n)=>{r.classList.contains(e)&&t.push(n)}),G(O=(O+1)%t.length,t)})}),V.length>0&&V[0].click();let K,Q=()=>{K=setInterval(()=>{let e=document.querySelector(".Nav .Item.Active")?.classList[1],t=[];U.forEach((r,n)=>{r.classList.contains(e)&&t.push(n)}),G(O=(O+1)%t.length,t)},3200)},Z=()=>{clearInterval(K)};Q();let ee=document.querySelector(".Benex.Photos");ee.addEventListener("mouseenter",function(){Z()}),ee.addEventListener("mouseleave",function(){Q()})});