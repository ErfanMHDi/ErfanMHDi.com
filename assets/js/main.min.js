document.addEventListener("DOMContentLoaded",(async function(){setTimeout((function(){document.body.classList.add("Loaded")}),1500);let e=new URLSearchParams(window.location.search).get("lang")||"en",t={};try{const n=await fetch("assets/json/translations.json");if(!n.ok)throw new Error(`HTTP error! Status: ${n.status}`);t=await n.json(),document.querySelectorAll("*").forEach((n=>{if(1===n.childNodes.length&&3===n.childNodes[0].nodeType){let o=n.textContent;o.includes("{{")&&(n.textContent=o.replace(/{{(.*?)}}/g,((n,o)=>(o=o.trim(),t[o]&&t[o][e]?t[o][e]:`{{${o}}}`))))}}))}catch(e){console.error("❌ Error fetching translations:",e)}const n=document.documentElement;"fa"===e?(n.setAttribute("lang","fa"),n.setAttribute("dir","rtl")):(n.setAttribute("lang","en"),n.setAttribute("dir","ltr")),document.querySelectorAll(".LanguageSwitcher a").forEach((t=>{new URL(t.href).searchParams.get("lang")===e?(t.classList.add("Current"),t.setAttribute("aria-current","true")):(t.classList.remove("Current"),t.setAttribute("aria-current","false"))}));const o=document.querySelectorAll(".LightSwitch input");function i(e){if(e!==document.documentElement.getAttribute("lights")){if("auto"===e){const e=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.setAttribute("lights",e?"off":"on")}else document.documentElement.setAttribute("lights",e);localStorage.setItem("lights",e)}}i(localStorage.getItem("lights")||"auto"),o.forEach((e=>{e.addEventListener("change",(function(){this.checked&&i(this.value)}))})),setTimeout((function(){const e=document.querySelectorAll("spline-viewer");0!==e.length&&e.forEach((e=>{let t=0;!function n(){if(!(t>=10))if(e.shadowRoot){const o=e.shadowRoot.querySelector("#logo");o?o.remove():(t++,setTimeout(n,500))}else t++,setTimeout(n,500)}()}))}),500),function(){const e=document.querySelector(".CopyRight span");if(e){const t=(new Date).getFullYear();e.textContent=t}}();let s=!1;function r(){s||(requestAnimationFrame((()=>{const e=document.querySelector("#Hero");if(!e)return;const t=e.offsetHeight,n=window.scrollY;let o=Math.min(n/t,1),i=Math.floor(100*o);const r=1-.001*i,c=.75*i,l=.1*i;let a=Math.max((i-0)/100,0);const d=1-a,u=20*a;e.style.transform=`scale(${r}) translateY(${c}px) rotateX(${l}deg)`,e.style.opacity=d,e.style.filter=`blur(${u}px)`,s=!1})),s=!0)}window.addEventListener("scroll",r),r();const c=document.querySelector("#Hero .Status"),l=new Date,a=new Date(l);a.setDate(l.getDate()+15);let d=a.toLocaleString("default",{month:"long"}),u=a.getFullYear();a.getDate()>15&&(a.setMonth(a.getMonth()+1),a.setDate(1),d=a.toLocaleString("default",{month:"long"}),u=a.getFullYear()),c.querySelector("strong").textContent=`${d} ${u}`;const h=document.querySelector("#Hero .Developer .Magic"),m=document.querySelector("#Hero .Developer .After"),f=document.querySelector("#Hero .Developer .WebDev");let g=!1;h.addEventListener("mousedown",(()=>{g=!0,document.body.style.userSelect="none"})),window.addEventListener("mouseup",(()=>{g=!1,document.body.style.userSelect=""})),window.addEventListener("mousemove",(e=>{if(!g)return;let t=f.getBoundingClientRect(),n=e.clientX-t.left,o=t.width;n<-4&&(n=-4),n>o-8&&(n=o-8);let i=10-n/10;h.style.left=`${n}px`,h.style.top=`${i}px`,m.style.width=`${n}px`}));const y=document.querySelectorAll("#Hero .Designer .ColorSets li"),v=document.querySelector("#Hero .Designer h2");function p(){const{Engine:e,Render:t,Runner:n,Bodies:o,World:i,Mouse:s,MouseConstraint:r,Composite:c}=Matter,l=document.querySelector("#Services .DEV .Wrapper");if(!l)return;l.style.position="relative";const a=e.create(),d=a.world,u=t.create({element:l,engine:a,options:{width:l.clientWidth,height:l.clientHeight,wireframes:!1,background:"transparent",pixelRatio:window.devicePixelRatio,enabled:!1}});t.run(u);const h=n.create();let m,f,g,y;function v(){const e=l.clientWidth,t=l.clientHeight;m&&i.remove(d,[m,f,g,y]),m=o.rectangle(e/2,t-5,e,10,{isStatic:!0,render:{visible:!1}}),f=o.rectangle(5,t/2,10,t,{isStatic:!0,render:{visible:!1}}),g=o.rectangle(e-5,t/2,10,t,{isStatic:!0,render:{visible:!1}}),y=o.rectangle(e/2,5,e,10,{isStatic:!0,render:{visible:!1}}),i.add(d,[m,f,g,y])}n.run(h,a),u.canvas.addEventListener("wheel",(e=>{e.stopPropagation()}),{passive:!0}),setTimeout(v,50);const p=l.querySelectorAll(".Pill"),w=[];function S(){const e=l.clientWidth,t=l.clientHeight;u.bounds.max.x=e,u.bounds.max.y=t,u.options.width=e,u.options.height=t,u.canvas.width=e,u.canvas.height=t,Matter.Render.setPixelRatio(u,window.devicePixelRatio),v(),function(){const e=l.clientWidth,t=l.clientHeight;w.forEach((({body:n})=>{Matter.Body.setPosition(n,{x:Math.min(Math.max(n.position.x,20),e-20),y:Math.min(Math.max(n.position.y,20),t-20)})}))}()}let L;p.forEach((e=>{const t=e.getBoundingClientRect(),n=l.getBoundingClientRect(),s=t.width,r=t.height,c=o.rectangle(t.left-n.left+t.width/2,t.top-n.top+t.height/2,t.width,t.height,{restitution:.32,friction:.1,density:.02,frictionAir:.02,chamfer:{radius:Math.min(t.width,t.height)/2},render:{visible:!1}});i.add(d,c),w.push({element:e,body:c,initialWidth:s,initialHeight:r})})),window.addEventListener("resize",(()=>{clearTimeout(L),L=setTimeout(S,200)}));const E=s.create(u.canvas),x=r.create(a,{mouse:E,constraint:{stiffness:.2,render:{visible:!1}}});i.add(d,x),u.mouse=E,l.addEventListener("mouseleave",(()=>{x.body&&(x.body=null),x.constraint.pointA=null,x.constraint.bodyB=null,x.constraint.pointB=null})),a.enableSleeping=!0;let M=0;!function e(){M++,M%2==0&&w.forEach((({element:e,body:t,initialWidth:n,initialHeight:o})=>{e.style.position="absolute",e.style.left=t.position.x-n/2+"px",e.style.top=t.position.y-o/2+"px",e.style.transform=`rotate(${t.angle}rad)`})),requestAnimationFrame(e)}(),E.element.removeEventListener("wheel",E.mousewheel)}y.forEach((e=>{e.addEventListener("click",(function(){if(this.classList.contains("Selected"))return this.classList.remove("Selected"),void v.classList.forEach((e=>{e.startsWith("Color")&&v.classList.remove(e)}));v.style.opacity="0.5",setTimeout((()=>{v.classList.forEach((e=>{e.startsWith("Color")&&v.classList.remove(e)})),v.classList.add(...this.classList),v.style.opacity="1"}),500),y.forEach((e=>e.classList.remove("Selected"))),this.classList.add("Selected")}))})),function(){const e=document.querySelector("#Services .DEV .Wrapper");if(!e)return;let t=!1;function n(){if(t)return;const o=e.getBoundingClientRect(),i=o.top+o.height/2,s=window.innerHeight/2;Math.abs(i-s)<.5*window.innerHeight&&(p(),t=!0,window.removeEventListener("scroll",n))}new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&!t&&(window.addEventListener("scroll",n),n())}))}),{threshold:.5}).observe(e)}();const w=document.querySelector(".Music audio");let S=0;const L=w.querySelectorAll("source"),E=Array.from(L).map((e=>e.src));function x(){w.querySelectorAll("source").forEach(((e,t)=>{e.src=t===S?E[t]:""})),w.load()}async function M(){try{await import("../js/jsmediatags.min.js");const e=window.jsmediatags,t=E[S];e.read(t,{onSuccess:function(e){const t=e.tags.picture,n=e.tags.title,o=e.tags.artist;if(t){const e=new Uint8Array(t.data);let n="";e.forEach((e=>{n+=String.fromCharCode(e)}));const o=window.btoa(n),i="data:"+t.format+";base64,"+o;document.querySelectorAll(".Music .ArtWork img").forEach((e=>{e.src=i}))}const i=document.querySelector(".Music strong");i&&(i.textContent=n||"Unknown Title");const s=document.querySelector(".Music p");s&&(s.textContent=o||"Unknown Artist"),function(){const e=Math.floor(w.duration),t=isNaN(e)?0:e,n=Math.floor(t/60),o=t%60;C.textContent=0===t?"0:00":`-${n}:${o<10?"0"+o:o}`}()},onError:function(e){console.error("⚠️ Error reading Music MetaData:",e)}})}catch(e){console.error("❌ Failed to load jsMediaTags:",e)}}const b=document.querySelector(".Benex.Music .Wrapper .ProgressBar"),q=document.querySelector(".Benex.Music .Wrapper .Current"),C=document.querySelector(".Benex.Music .Wrapper .Duration");w.addEventListener("timeupdate",(function(){const e=isNaN(w.currentTime/w.duration*100)?0:w.currentTime/w.duration*100;b.value=e,b.style.setProperty("--value",b.value),b.style.setProperty("--min",b.min||"0"),b.style.setProperty("--max",b.max||"100");const t=Math.floor(w.currentTime),n=Math.floor(w.duration),o=Math.floor(t/60),i=t%60,s=Math.floor(n-t),r=Math.floor(s/60),c=s%60;q.textContent=`${o}:${i<10?"0"+i:i}`,C.textContent=0===s?"0:00":`-${r}:${c<10?"0"+c:c}`})),b.addEventListener("input",(function(){const e=b.value/100*w.duration;w.currentTime=e,b.style.setProperty("--value",b.value)}));const A=document.querySelector(".Music .Controls .Play"),$=document.querySelector(".Music .Controls .Pause");function H(){w.paused?(A.classList.remove("Hide"),$.classList.add("Hide")):($.classList.remove("Hide"),A.classList.add("Hide"))}H(),A.addEventListener("click",(function(){w.play(),H()})),$.addEventListener("click",(function(){w.pause(),H()}));const P=document.querySelector(".Music .Controls .Prev"),R=document.querySelector(".Music .Controls .Next");P.addEventListener("click",(function(){const e=!w.paused;S=(S-1+E.length)%E.length,x(),M(),e&&w.play(),H()})),R.addEventListener("click",(function(){const e=!w.paused;S=(S+1)%E.length,x(),M(),e&&w.play(),H()})),w.addEventListener("ended",(function(){S=(S+1)%E.length,x(),M(),w.play(),H()})),x(),M();const D=document.querySelector(".PhotoSlider").querySelectorAll(".Photo"),W=document.querySelectorAll(".Nav .Item"),B=document.querySelector(".Nav .Indicator");let T=0;const k=(e,t)=>{D.forEach((e=>{e.classList.remove("visible"),"video"===e.tagName.toLowerCase()&&e.pause()}));const n=D[t[e]];n.classList.add("visible"),"video"===n.tagName.toLowerCase()&&n.play()};W.forEach(((e,t)=>{e.addEventListener("click",(function(){W.forEach((e=>e.classList.remove("Active"))),e.classList.add("Active");const t=e.classList[1];N(t);const n=e.getBoundingClientRect(),o=e.parentElement.getBoundingClientRect(),i=n.left-o.left;function s(){const t=e.getBoundingClientRect(),n=e.parentElement.getBoundingClientRect(),o=t.left-n.left;B.style.width=`${e.clientWidth}px`,B.style.height=`${e.clientHeight}px`,B.style.left=`${o}px`}B.style.width=`${e.clientWidth}px`,B.style.height=`${e.clientHeight}px`,B.style.left=`${i}px`,s(),window.addEventListener("resize",s)}))}));const N=e=>{const t=[];D.forEach(((n,o)=>{n.classList.contains(e)&&t.push(o)})),t.length>0&&(T=0,k(T,t))};let I;D.forEach((e=>{e.addEventListener("click",(function(){const e=document.querySelector(".Nav .Item.Active")?.classList[1],t=[];D.forEach(((n,o)=>{n.classList.contains(e)&&t.push(o)})),T=(T+1)%t.length,k(T,t)}))})),W.length>0&&W[0].click();const j=()=>{I=setInterval((()=>{const e=document.querySelector(".Nav .Item.Active")?.classList[1],t=[];D.forEach(((n,o)=>{n.classList.contains(e)&&t.push(o)})),T=(T+1)%t.length,k(T,t)}),3200)};j();const F=document.querySelector(".Benex.Photos");F.addEventListener("mouseenter",(function(){clearInterval(I)})),F.addEventListener("mouseleave",(function(){j()}))}));