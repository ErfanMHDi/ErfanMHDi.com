document.addEventListener("DOMContentLoaded",async function(){let e=performance.now();window.addEventListener("load",()=>{let t=performance.now();setTimeout(()=>{document.body.classList.add("Loaded")},Math.max(250-(t-e),0))});let t=0,r=performance.now(),n=document.getElementById("ScrollCanvas"),l=n.getContext("2d"),i=[],o=e=>{e-r>=33.333333333333336&&(t=(t+1)%60,l.clearRect(0,0,n.width,n.height),l.drawImage(i[t],0,0,n.width,n.height),r=e),requestAnimationFrame(o)};(()=>{let e=0;for(let t=1;t<=60;t++){let r=t.toString().padStart(2,"0"),n=new Image;n.onload=()=>{60==++e&&requestAnimationFrame(o)},n.src=`assets/img/hero/ScrollDown/ScrollDown-${r}.svg`,i.push(n)}})();let s=new URLSearchParams(window.location.search),a=s.get("lang")||"en",c={};try{let d=await fetch("assets/json/translations.json");if(!d.ok)throw Error(`HTTP error! Status: ${d.status}`);c=await d.json(),document.querySelectorAll("*").forEach(e=>{if(1===e.childNodes.length&&3===e.childNodes[0].nodeType){let t=e.textContent;t.includes("{{")&&(e.textContent=t.replace(/{{(.*?)}}/g,(e,t)=>c[t=t.trim()]&&c[t][a]?c[t][a]:`{{${t}}}`))}})}catch(u){console.error("❌ Error fetching translations:",u)}let h=document.documentElement;"fa"===a?(h.setAttribute("lang","fa"),h.setAttribute("dir","rtl")):(h.setAttribute("lang","en"),h.setAttribute("dir","ltr")),document.querySelectorAll(".LanguageSwitcher a").forEach(e=>{let t=new URL(e.href).searchParams.get("lang");t===a?(e.classList.add("Current"),e.setAttribute("aria-current","true")):(e.classList.remove("Current"),e.setAttribute("aria-current","false"))});let f=document.querySelectorAll(".LightSwitch input");function g(e){let t=document.documentElement.getAttribute("lights");if(e!==t){if("auto"===e){let r=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.setAttribute("lights",r?"off":"on")}else document.documentElement.setAttribute("lights",e);localStorage.setItem("lights",e)}}g(localStorage.getItem("lights")||"auto"),f.forEach(e=>{e.addEventListener("change",function(){this.checked&&g(this.value)})}),setTimeout(function e(){let t=document.querySelectorAll("spline-viewer");0!==t.length&&t.forEach(e=>{let t=0;!function r(){if(!(t>=10)){if(e.shadowRoot){let n=e.shadowRoot.querySelector("#logo");n?n.remove():(t++,setTimeout(r,500))}else t++,setTimeout(r,500)}}()})},500),!function e(){let t=document.querySelector(".CopyRight span");if(t){let r=new Date().getFullYear();t.textContent=r}}();let $=!1;function y(){$||(requestAnimationFrame(()=>{let e=document.querySelector("#Hero");if(!e)return;let t=e.offsetHeight,r=window.scrollY,n=Math.floor(100*Math.min(r/t,1)),l=Math.max((n-0)/100,0);e.style.transform=`scale(${1-.001*n}) translateY(${.75*n}px) rotateX(${.1*n}deg)`,e.style.opacity=1-l,e.style.filter=`blur(${20*l}px)`,$=!1}),$=!0)}window.addEventListener("scroll",y),y();let p=document.querySelector("#Hero .Status"),m=new Date,v=new Date(m);v.setDate(m.getDate()+15);let S=v.toLocaleString("default",{month:"long"}),E=v.getFullYear();v.getDate()>15&&(v.setMonth(v.getMonth()+1),v.setDate(1),S=v.toLocaleString("default",{month:"long"}),E=v.getFullYear()),p.querySelector("strong").textContent=`${S} ${E}`;let L=document.querySelector("#Hero .Developer .Magic"),_=document.querySelector("#Hero .Developer .After"),w=document.querySelector("#Hero .Developer .WebDev"),x=!1;L.addEventListener("mousedown",()=>{x=!0,document.body.style.userSelect="none"}),window.addEventListener("mouseup",()=>{x=!1,document.body.style.userSelect=""}),window.addEventListener("mousemove",e=>{if(!x)return;let t=w.getBoundingClientRect(),r=e.clientX-t.left,n=t.width;r<-4&&(r=-4),r>n-8&&(r=n-8);let l=10-r/10;L.style.left=`${r}px`,L.style.top=`${l}px`,_.style.width=`${r}px`});let q=document.querySelectorAll("#Hero .Designer .ColorSets li"),C=document.querySelector("#Hero .Designer h2");async function b(){let e=await new Promise((e,t)=>{if(window.Matter)return e(window.Matter);let r=document.createElement("script");r.src="../assets/js/matter.min.js",r.onload=()=>e(window.Matter),r.onerror=t,document.head.appendChild(r)}),{Engine:t,Render:r,Runner:n,Bodies:l,World:i,Mouse:o,MouseConstraint:s}=e,a=document.querySelector("#Services .DEV .Wrapper");if(!a)return;a.style.position="relative";let c=t.create(),d=c.world,u=r.create({element:a,engine:c,options:{width:a.clientWidth,height:a.clientHeight,wireframes:!1,background:"transparent",pixelRatio:window.devicePixelRatio,enabled:!1}});r.run(u);let h=n.create();n.run(h,c),u.canvas.addEventListener("wheel",e=>{e.stopPropagation()},{passive:!0});let f,g,$,y;function p(){let e=a.clientWidth,t=a.clientHeight;f&&i.remove(d,[f,g,$,y]),f=l.rectangle(e/2,t-5,e,10,{isStatic:!0,render:{visible:!1}}),g=l.rectangle(5,t/2,10,t,{isStatic:!0,render:{visible:!1}}),$=l.rectangle(e-5,t/2,10,t,{isStatic:!0,render:{visible:!1}}),y=l.rectangle(e/2,5,e,10,{isStatic:!0,render:{visible:!1}}),i.add(d,[f,g,$,y])}setTimeout(p,50);let m=a.querySelectorAll(".Pill"),v=[];function S(){let t=a.clientWidth,r=a.clientHeight;u.bounds.max.x=t,u.bounds.max.y=r,u.options.width=t,u.options.height=r,u.canvas.width=t,u.canvas.height=r,e.Render.setPixelRatio(u,window.devicePixelRatio),p(),function t(){let r=a.clientWidth,n=a.clientHeight;v.forEach(({body:t})=>{e.Body.setPosition(t,{x:Math.min(Math.max(t.position.x,20),r-20),y:Math.min(Math.max(t.position.y,20),n-20)})})}()}m.forEach(e=>{let t=e.getBoundingClientRect(),r=a.getBoundingClientRect(),n=t.width,o=t.height,s=l.rectangle(t.left-r.left+t.width/2,t.top-r.top+t.height/2,t.width,t.height,{restitution:.32,friction:.1,density:.02,frictionAir:.02,chamfer:{radius:Math.min(t.width,t.height)/2},render:{visible:!1}});i.add(d,s),v.push({element:e,body:s,initialWidth:n,initialHeight:o})});let E;window.addEventListener("resize",()=>{clearTimeout(E),E=setTimeout(S,200)});let L=o.create(u.canvas),_=s.create(c,{mouse:L,constraint:{stiffness:.2,render:{visible:!1}}});i.add(d,_),u.mouse=L,a.addEventListener("mouseleave",()=>{_.body&&(_.body=null),_.constraint.pointA=null,_.constraint.bodyB=null,_.constraint.pointB=null}),c.enableSleeping=!0;let w=0;!function e(){++w%2==0&&v.forEach(({element:e,body:t,initialWidth:r,initialHeight:n})=>{e.style.position="absolute",e.style.left=`${t.position.x-r/2}px`,e.style.top=`${t.position.y-n/2}px`,e.style.transform=`rotate(${t.angle}rad)`}),requestAnimationFrame(e)}(),L.element.removeEventListener("wheel",L.mousewheel)}q.forEach(e=>{e.addEventListener("click",function(){let e=this.classList.contains("Selected");if(e){this.classList.remove("Selected"),C.classList.forEach(e=>{e.startsWith("Color")&&C.classList.remove(e)});return}C.style.opacity="0.5",setTimeout(()=>{C.classList.forEach(e=>{e.startsWith("Color")&&C.classList.remove(e)}),C.classList.add(...this.classList),C.style.opacity="1"},500),q.forEach(e=>e.classList.remove("Selected")),this.classList.add("Selected")})}),!function e(){let t=document.querySelector("#Services .DEV .Wrapper");if(!t)return;let r=!1;function n(){if(r)return;let e=t.getBoundingClientRect(),l=e.top+e.height/2,i=window.innerHeight/2,o=.5*window.innerHeight;Math.abs(l-i)<o&&(b(),r=!0,window.removeEventListener("scroll",n))}let l=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&!r&&(window.addEventListener("scroll",n),n())})},{threshold:.5});l.observe(t)}();let A=document.querySelector(".Music audio"),M=0,H=A.querySelectorAll("source"),P=Array.from(H).map(e=>e.src);function B(){let e=A.querySelectorAll("source");e.forEach((e,t)=>{e.src=t===M?P[t]:""}),A.load()}async function D(){try{await import("../js/jsmediatags.min.js");let e=window.jsmediatags,t=P[M];e.read(t,{onSuccess:function(e){let t=e.tags.picture,r=e.tags.title,n=e.tags.artist;if(t){let l=new Uint8Array(t.data),i="";l.forEach(e=>{i+=String.fromCharCode(e)});let o=window.btoa(i),s="data:"+t.format+";base64,"+o;document.querySelectorAll(".Music .ArtWork img").forEach(e=>{e.src=s})}let a=document.querySelector(".Music strong");a&&(a.textContent=r||"Unknown Title");let c=document.querySelector(".Music p");c&&(c.textContent=n||"Unknown Artist"),function e(){let t=Math.floor(A.duration),r=isNaN(t)?0:t,n=r%60;W.textContent=0===r?"0:00":`-${Math.floor(r/60)}:${n<10?"0"+n:n}`}()},onError:function(e){console.error("⚠️ Error reading Music MetaData:",e)}})}catch(r){console.error("❌ Failed to load jsMediaTags:",r)}}let R=document.querySelector(".Benex.Music .Wrapper .ProgressBar"),k=document.querySelector(".Benex.Music .Wrapper .Current"),W=document.querySelector(".Benex.Music .Wrapper .Duration");A.addEventListener("timeupdate",function(){let e=isNaN(A.currentTime/A.duration*100)?0:A.currentTime/A.duration*100;R.value=e,R.style.setProperty("--value",R.value),R.style.setProperty("--min",R.min||"0"),R.style.setProperty("--max",R.max||"100");let t=Math.floor(A.currentTime),r=Math.floor(A.duration),n=t%60,l=Math.floor(r-t),i=l%60;k.textContent=`${Math.floor(t/60)}:${n<10?"0"+n:n}`,W.textContent=0===l?"0:00":`-${Math.floor(l/60)}:${i<10?"0"+i:i}`}),R.addEventListener("input",function(){let e=R.value/100*A.duration;A.currentTime=e,R.style.setProperty("--value",R.value)});let j=document.querySelector(".Music .Controls .Play"),I=document.querySelector(".Music .Controls .Pause");function N(){A.paused?(j.classList.remove("Hide"),I.classList.add("Hide")):(I.classList.remove("Hide"),j.classList.add("Hide"))}N(),j.addEventListener("click",function(){A.play(),N()}),I.addEventListener("click",function(){A.pause(),N()});let T=document.querySelector(".Music .Controls .Prev"),Y=document.querySelector(".Music .Controls .Next");T.addEventListener("click",function(){let e=!A.paused;M=(M-1+P.length)%P.length,B(),D(),e&&A.play(),N()}),Y.addEventListener("click",function(){let e=!A.paused;M=(M+1)%P.length,B(),D(),e&&A.play(),N()}),A.addEventListener("ended",function(){M=(M+1)%P.length,B(),D(),A.play(),N()}),B(),D();let F=document.querySelector(".PhotoSlider"),z=F.querySelectorAll(".Photo"),U=document.querySelectorAll(".Nav .Item"),V=document.querySelector(".Nav .Indicator"),X=0,O=(e,t)=>{z.forEach(e=>{e.classList.remove("visible"),"video"===e.tagName.toLowerCase()&&e.pause()});let r=z[t[e]];r.classList.add("visible"),"video"===r.tagName.toLowerCase()&&r.play()};U.forEach((e,t)=>{e.addEventListener("click",function(){U.forEach(e=>e.classList.remove("Active")),e.classList.add("Active");let t=e.classList[1];G(t);let r=e.getBoundingClientRect(),n=e.parentElement.getBoundingClientRect(),l=r.left-n.left;function i(){let t=e.getBoundingClientRect(),r=e.parentElement.getBoundingClientRect(),n=t.left-r.left;V.style.width=`${e.clientWidth}px`,V.style.height=`${e.clientHeight}px`,V.style.left=`${n}px`}V.style.width=`${e.clientWidth}px`,V.style.height=`${e.clientHeight}px`,V.style.left=`${l}px`,i(),window.addEventListener("resize",i)})});let G=e=>{let t=[];z.forEach((r,n)=>{r.classList.contains(e)&&t.push(n)}),t.length>0&&O(X=0,t)};z.forEach(e=>{e.addEventListener("click",function(){let e=document.querySelector(".Nav .Item.Active")?.classList[1],t=[];z.forEach((r,n)=>{r.classList.contains(e)&&t.push(n)}),O(X=(X+1)%t.length,t)})}),U.length>0&&U[0].click();let J,K=()=>{J=setInterval(()=>{let e=document.querySelector(".Nav .Item.Active")?.classList[1],t=[];z.forEach((r,n)=>{r.classList.contains(e)&&t.push(n)}),O(X=(X+1)%t.length,t)},3200)},Q=()=>{clearInterval(J)};K();let Z=document.querySelector(".Benex.Photos");Z.addEventListener("mouseenter",function(){Q()}),Z.addEventListener("mouseleave",function(){K()})});